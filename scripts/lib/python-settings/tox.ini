[tox]
envlist=py3

[testenv]
deps =
    setuptools-scm
    pytest
    types-PyYAML
    mypy
setenv =
    TOXTEMPDIR={envtmpdir}
commands =
  python -m pytest {posargs:tests}
  python -m mypy --config-file={toxinidir}/tox.ini --enable-incomplete-feature=NewGenericSyntax --package=settings

[mypy]
mypy_path=src
# Allows Type[T] to refer to abstract classes, which is not otherwise supported.
# See https://github.com/python/mypy/issues/4717
disable_error_code=type-abstract
